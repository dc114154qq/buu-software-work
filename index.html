<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èƒ¡åŒå¯¼è§ˆ - é¦–é¡µ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header><h1>èƒ¡åŒå¯¼è§ˆ</h1></header>

    <div class="container">
        <div class="card" style="display:block; padding:20px; text-align:center;">
            <h2 id="hutong-name" style="color:#d63031; margin-bottom:10px;">åŠ è½½ä¸­...</h2>
            <p style="color:#636e72; font-size:0.9rem; text-align:left; line-height:1.6;">
                è¿™é‡Œæ˜¯è¿æ¥å¤§æ …æ å’Œç‰ç’ƒå‚çš„æ–‡åŒ–çº½å¸¦ã€‚æ—¢ä¿ç•™äº†è€åŒ—äº¬çš„å¸‚äº•æ°”æ¯ï¼Œåˆèåˆäº†ä¹¦å±€å†å²ä¸ç°ä»£åˆ›æ„è®¾è®¡ã€‚
            </p>
        </div>

        <h3>ğŸ”¥ çƒ­é—¨æ¨è</h3>
        <div id="recommend-list"></div>
    </div>

    <nav class="bottom-nav">
        <a href="index.html" class="nav-item active"><span class="nav-icon">ğŸ </span>é¦–é¡µ</a>
        <a href="pois.html" class="nav-item"><span class="nav-icon">ğŸœ</span>æ™¯ç‚¹ç¾é£Ÿ</a>
        <a href="stays.html" class="nav-item"><span class="nav-icon">ğŸ›ï¸</span>é…’åº—ä½å®¿</a>
        <a href="route.html" class="nav-item"><span class="nav-icon">ğŸ—ºï¸</span>è·¯çº¿</a>
    </nav>

    <script>
        fetch('./data.json')
            .then(res => res.json())
            .then(data => {
                document.getElementById('hutong-name').innerText = data.hutong.name;
                
                // æ¨èç®—æ³•ï¼šé€‰è¯„åˆ†æœ€é«˜çš„1ä¸ªæ™¯ç‚¹å’Œ1ä¸ªé…’åº—
                const bestPoi = data.pois.sort((a,b) => b.rating - a.rating)[0];
                const bestStay = data.stays.sort((a,b) => b.rating - a.rating)[0];
                const list = [bestPoi, bestStay];

                const container = document.getElementById('recommend-list');
                list.forEach(item => {
        if(!item) return;
        const isStay = item.type === 'ä½å®¿';
        const price = isStay ? 
            (item.roomOffers?.[0]?.priceCNY || '-') : item.avgPricePerPersonCNY;
        
        // å›¾ç‰‡å¤„ç†
        let imgSrc = '';
        if (item.media && item.media.cover) {
            imgSrc = item.media.cover;
        }

        const fallbackText = isStay ? 'æ¨èä½å®¿' : 'æ¨èå¿…å»';

        // --- ä¿®æ”¹å¼€å§‹ ---
        container.innerHTML += `
            <a href="detail.html?id=${item.id}" class="card">
                <div class="card-left">
                    <span class="img-fallback-text">${fallbackText}</span>
                    
                    <img src="${imgSrc}" class="thumb-img" onerror="this.style.display='none'">
                    
                    <span style="position:absolute; top:0; left:0; background:var(--primary-color); color:white; font-size:0.8rem; padding:3px 8px; border-bottom-right-radius:8px; z-index:10; box-shadow:1px 1px 3px rgba(0,0,0,0.3);">
                        ${fallbackText}
                    </span>
                </div>
                <div class="card-content">
                    <h4 class="card-title">${item.name}</h4>
                    <div class="card-info">â˜… ${item.rating} | Â¥${price}èµ·</div>
                </div>
            </a>`;
        // --- ä¿®æ”¹ç»“æŸ ---
    });
            });
    </script>
</body>
</html>